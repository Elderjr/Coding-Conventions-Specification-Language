[comment encoding = UTF-8 /]
[module methodInvocationModule('http://www.example.org/ccsl') extends org::ccsl::gen::ocl::elements::statements::statementModule /]
[import org::ccsl::gen::ocl::elements::namedElement::method::methodModule /]
[import org::gen::ocl::strings::stringModule /]

[template public test(element : MethodInvocation) overrides test]
MethodInv
 [element.elementAccessed.test() /]
[/template]

[template public generateMethodInvocationSelect(methodInvocation: MethodInvocation, filters: OrderedSet(AtomicFilter))]
MethodInvocation.allInstances()
  ->select(inv: MethodInvocation |
    [methodInvocation.generateMethodInvocationConditions(null, 'inv', filters, false, false) /]
)
[/template]

[query public getAllMethodInvocationConditions(methodInvocation: MethodInvocation, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean): Set(String) =
Set(String){
  	methodInvocation.generateMethodCondition(contextElement, varName, filters, exactMatch)
}
->select(condition: String | condition.trim().size() > 0)
->union(methodInvocation.getAllStatementConditions(contextElement, varName, filters, exactMatch))
/]

[template public generateMethodInvocationConditions(element: Element, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean, typeCheck: Boolean) ? (element.oclIsTypeOf(MethodInvocation)) post(trim())]
( -- Method Invocation conditions
[for (condition: String | element.oclAsType(MethodInvocation).getAllMethodInvocationConditions(contextElement, varName, filters, exactMatch)) separator(' and \n')]
  [condition.printStringWithIdentation() /][/for]

) --End Method Invocation conditions
[/template]

[template private generateMethodCondition(methodInvocation: MethodInvocation, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean)]
[comment methodInvocation.generateGenericSingleAttributeCondition(contextElement, varName, filters, false, false, methodInvocation.elementAccessed.oclAsType(Method), 'method') /]
[/template]

