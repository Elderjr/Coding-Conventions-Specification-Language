[comment encoding = UTF-8 /]
[module namedElementModule('http://www.example.org/ccsl') extends org::ccsl::gen::ocl::elements::elementModule /]

[import org::gen::ocl::strings::stringModule /]

[query public getAllNamedElementConditions(namedElement: NamedElement, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean): Set(String) =
Set(String){
  	namedElement.generateNameCondition(varName)
}
->select(condition: String | condition.trim().size() > 0)
->union(namedElement.getAllElementConditions(contextElement, varName, filters, exactMatch))
/]

[template public generateConditions(namedElement: NamedElement, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean, typeCheck: Boolean) post(trim())]
[for (condition: String | namedElement.getAllNamedElementConditions(contextElement, varName, filters, exactMatch)) separator(' and \n')]
[condition.printStringWithIdentation() /][/for]
[/template]

[template private generateNameCondition(namedElement: NamedElement, varName: String)]
[if not namedElement.name.oclIsUndefined()][varName /].name='[namedElement.name/]'[/if]
[/template]