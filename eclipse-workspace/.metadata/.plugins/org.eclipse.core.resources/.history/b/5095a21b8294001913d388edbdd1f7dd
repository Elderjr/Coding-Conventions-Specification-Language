[comment encoding = UTF-8 /]
[module methodModule('http://www.example.org/ccsl')]
[import org::ccsl::gen::ocl::elements::elementModule /] 
[import org::ccsl::gen::ocl::elements::namedElement::namedElementModule /]


[query public queryConditionComplexType(method: Method, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean): Set(String) =
OrderedSet(String){
}
->select(condition: String | condition.trim().size() > 0)
->union([query public queryConditionComplexType(complexType: ComplexType, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean): Set(String) =
OrderedSet(String){
  	complexType.defineFieldsQueryCondition(contextElement, varName, filters, exactMatch),
	complexType.defineMethodsQueryCondition(contextElement, varName, filters, exactMatch)
}
->select(condition: String | condition.trim().size() > 0)
->union(complexType.queryConditionNamedElement(contextElement, varName, filters, exactMatch))/].queryConditionNamedElement(contextElement, varName, filters, exactMatch))/]

[template public defineQueryCondition(element: Element, contextElement: Element, varName: String, filters: OrderedSet(AtomicFilter), exactMatch: Boolean) ? (element.oclIsTypeOf(NamedElement)) post(trim())]
[for (condition: String | element.oclAsType(NamedElement).queryConditionNamedElement(contextElement, varName, filters, exactMatch)) separator(' and \n')]
[condition /][/for]
[/template]

